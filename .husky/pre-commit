#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "Running Prettier and ESLint checks..."

# Get a list of staged files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM "*.js" "*.jsx" "*.ts" "*.tsx")

if [ -z "$STAGED_FILES" ]; then
  echo "No staged files to check."
  exit 0
fi

# Run Prettier on staged files
echo "$STAGED_FILES" | xargs npx prettier --write

# Run ESLint on staged files
echo "$STAGED_FILES" | xargs npx eslint --fix

# Add the files back to the staging area
echo "$STAGED_FILES" | xargs git add

echo "Checks passed!"